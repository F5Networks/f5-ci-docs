// REMOVE ALL COMMENTS FROM THIS FILE BEFORE USING
{
  "container": {
    "docker": {
      "portMappings": [
        {
          // This service port will be the ASP's host port; make sure it is
          // an available port
          "servicePort": 11099,
          "protocol": "tcp",
          "containerPort": 80,
          "hostPort": 0
        }
      ],
      "privileged": false,
      "image": "someImage:version>",
      "network": "BRIDGE",
      "forcePullImage": true
    },
    "type": "DOCKER",
    "volumes": []
  },
  "mem": 128,
  // The labels below activate and configure the ASP
  "labels": {
    "f5-asp": "enable",
    "ASP_LOG_LEVEL": "debug",
    "ASP_VS_KEEP_ALIVE": 50,
    "ASP_VS_FLAGS" : "{ \"x-forwarded-for\": true, \"x-forwarded-by\": true}",
    "ASP_VS_EVENT_HANDLERS": "[{\"http-request\": \"module.exports = (req, res, next) => {\n if (req.method === 'POST') {\n res.statusCode = 503;\n res.end('POST Method not supported');\n } else { \n next(); \n } \n}\n\"}, {\"http-response\": \"module.exports = (res, next) => { res.headers['x-my-bar'] = 'foo'; next(); }\"}]",
    "ASP_COUNT_PER_APP": 2
  },
  "cpus": 0.25,
  "instances": 1,
  "upgradeStrategy": {
    "maximumOverCapacity": 1,
    "minimumHealthCapacity": 1
  },
  "id": "demo-app-custom"
}
