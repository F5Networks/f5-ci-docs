

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Package Versioning &mdash; F5 Container Integration 0.1_a documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="F5 Container Integration 0.1_a documentation" href="../../index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> F5 Container Integration
          

          
          </a>

          
            
            
              <div class="version">
                0.1_a
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../f5-marathon-lb/index.html">f5-marathon-lb</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lightweight-proxy/index.html">Light Weight Proxy (LWP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">lwp-controller</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">F5 Container Integration</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
    <li>Package Versioning</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/lwp-controller/doc/versioning.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="package-versioning">
<span id="package-versioning"></span><h1>Package Versioning<a class="headerlink" href="#package-versioning" title="Permalink to this headline">¶</a></h1>
<p>Most/all of the code developed for the Velcro project will be distributed in some sort of binary package format. The first format that is supported is the Debian package format used by Ubuntu Linux. Support may be added for the RPM package format used by Redhat based distributions in the future; and also possibly the APK package format used by Alpine Linux. To reasonably support all of these platforms, a common package version string that works with all package systems is ideal as we would only have to set the version (using git tags) on a particular commit and it would apply to all packages built for that version. The version string should support different kinds of releases (alpha/beta/release-candidate/release) and should sort correctly such that alpha &lt; beta &lt; release-candidate &lt; release for a given upstream version. In practice, this is possible with Debian and RPM packages by using a subset of characters in a specific format; but the same format does not work with APK packages, nor does there seem to be any easy way to make that happen. NOTE: I have not spent a significant amount of time researching APK package versions; but in any case we can always build tooling to transform the git version tags into something that works with APK versions. APK packages will not be discussed here any further until it is decided to support them.</p>
<div class="section" id="version-string-format">
<span id="version-string-format"></span><h2>Version String Format<a class="headerlink" href="#version-string-format" title="Permalink to this headline">¶</a></h2>
<p>The format of the version string should be as follows to sort correctly in each package type:</p>
<p><strong><em>projectName</em>-<em>upstreamVersion</em></strong> <em>[~alphaNumericString]</em></p>
<p>The individual components are:</p>
<ul class="simple">
<li>Required:<ul>
<li>projectName is the name of your project.</li>
<li>upstreamVersion is the current version of your project as 3 period-separated numbers major.minor.revision. This sorts in an obvious way.</li>
</ul>
</li>
<li>Optional:<ul>
<li>~alphaNumericString can be any combination of letters and numbers prefixed by a tilde. The way sorting works on this portion is not obvious, and requires further explanation:<ul>
<li>The tilde is handled specially by both the Debian and RPM versioning schemes, and sorts before &#8216;nothing&#8217; (projectName-1.0.0~ &lt; projectName-1.0.0).</li>
<li>The rest of alphaNumericString is broken into groups - contiguous numbers are grouped together, contiguous letters are grouped together, and anything else forces a group break (12.34 is 2 groups of numbers and abcd.efgh is 2 groups of letters).</li>
<li>Each group is compared to its corresponding group in the version strings until a mismatch occurs (numbers are compared numerically, strings are compared as strings) or one version string runs out of groups in which is treated as an empty string.</li>
<li>The alphaNumericString should always start with a letter OR a number for a given upstreamVersion, as they are sorted differently for Debian (0 &lt; A &lt; a) and RPM (A &lt; a &lt; 0).</li>
<li>There are many other differences between the package version strings between package types, but we should not encounter them if the rules described in this section are followed.</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="section" id="examples-listed-in-ascending-newest-sort-order">
<span id="examples-listed-in-ascending-newest-sort-order"></span><h3>Examples (listed in ascending/newest sort order):<a class="headerlink" href="#examples-listed-in-ascending-newest-sort-order" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>First alpha for 1.0.0<ul>
<li>projectName-1.0.0~alpha1</li>
</ul>
</li>
<li>Tenth alpha for 1.0.0<ul>
<li>projectName-1.0.0~alpha10</li>
</ul>
</li>
<li>First beta for 1.0.0<ul>
<li>projectName-1.0.0~beta1</li>
</ul>
</li>
<li>Tenth beta for 1.0.0<ul>
<li>projectName-1.0.0~beta10</li>
</ul>
</li>
<li>First release candidate for 1.0.0<ul>
<li>projectName-1.0.0~rc1</li>
</ul>
</li>
<li>Tenth release candidate for 1.0.0<ul>
<li>projectName-1.0.0~rc10</li>
</ul>
</li>
<li>1.0.0 Release<ul>
<li>projectName-1.0.0</li>
</ul>
</li>
<li>1.0.1 Release<ul>
<li>projectName-1.0.1</li>
</ul>
</li>
<li>First alpha for 1.0.2<ul>
<li>projectName-1.0.2~alpha1</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="verifying-package-version-strings">
<span id="verifying-package-version-strings"></span><h2>Verifying Package Version Strings<a class="headerlink" href="#verifying-package-version-strings" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>On Ubuntu, the following commands can be run to compare package version strings:</li>
</ul>
<div class="highlight-shell"><div class="highlight"><pre><span></span><span class="c1"># Usage: dpkg --compare-versions &lt;ver1&gt; eq|lt|gt &lt;ver2&gt;</span>
<span class="c1"># Requires two version strings separated by a comparison operator; exits with 0 on success or 1 on failure</span>

dpkg --compare-versions 1.0.0 eq 1.0.0
<span class="nb">echo</span> <span class="nv">$?</span>
0

dpkg --compare-versions 1.0.0 lt 1.0.0
<span class="nb">echo</span> <span class="nv">$?</span>
1

dpkg --compare-versions 1.0.0 gt 1.0.0
<span class="nb">echo</span> <span class="nv">$?</span>
1
</pre></div>
</div>
<ul class="simple">
<li>On a Redhat distro, the following command can be run to compare package version strings:</li>
</ul>
<div class="highlight-shell"><div class="highlight"><pre><span></span><span class="c1"># Usage: rpmdev-vercmp &lt;ver1&gt; &lt;ver2&gt;</span>
<span class="c1"># Requires two version strings; prints a human-readable result to the console and exits with 0 if equal, 12 if ver1 &lt; ver2, and 11 if ver1 &gt; ver2.</span>

rpmdev-vercmp 1.0.0 1.0.0
1.0.0 <span class="o">==</span> 1.0.0
<span class="nb">echo</span> <span class="nv">$?</span>
0

rpmdev-vercmp 1.0.0 1.0.1
1.0.0 &lt; 1.0.1
<span class="nb">echo</span> <span class="nv">$?</span>
12

rpmdev-vercmp 1.0.2 1.0.1
1.0.2 &gt; 1.0.1
<span class="nb">echo</span> <span class="nv">$?</span>
11
</pre></div>
</div>
<ul class="simple">
<li>And for reference, here&#8217;s the command to compare package version strings on Alpine Linux:</li>
</ul>
<div class="highlight-shell"><div class="highlight"><pre><span></span><span class="c1"># Usage: apk version -t &lt;ver1&gt; &lt;ver2&gt;</span>
<span class="c1"># Requires two version strings; prints the appropriate comparison operator to the console. Always exits with 0.</span>

apk version -t 1.0.0 1.0.0
<span class="o">=</span>
<span class="nb">echo</span> <span class="nv">$?</span>
0

apk version -t 1.0.0 1.0.1
&lt;
<span class="nb">echo</span> <span class="nv">$?</span>
0

apk version -t 1.0.2 1.0.1
&gt;
<span class="nb">echo</span> <span class="nv">$?</span>
0
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, F5 Networks.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.1_a',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>